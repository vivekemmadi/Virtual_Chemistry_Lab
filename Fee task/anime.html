<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemical Flask Animation</title>
    <style>
        .lab-setup {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 50px;
        }
        
        .flask {
            position: relative;
            width: 150px;
            height: 200px;
            background-color: rgba(200, 220, 255, 0.3);
            border: 3px solid #333;
            border-radius: 0 0 40px 40px;
            overflow: hidden;
        }
        
        .flask-neck {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 30px;
            background-color: rgba(200, 220, 255, 0.3);
            border: 3px solid #333;
            border-radius: 20px 20px 0 0;
            border-bottom: none;
        }
        
        .liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 0;
            transition: height 1s, background-color 1.5s;
        }
        
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 10px;
        }
        
        button {
            padding: 8px 15px;
            cursor: pointer;
        }
        
        .output {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            min-height: 50px;
            width: 80%;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="lab-setup">
        <div class="flask">
            <div class="flask-neck"></div>
            <div class="liquid" id="liquid"></div>
        </div>
        
        <div class="controls">
            <button id="add-chemical1">Add Chemical A (Blue)</button>
            <button id="add-chemical2">Add Chemical B (Red)</button>
            <button id="add-chemical3">Add Chemical C (Yellow)</button>
            <button id="mix">Mix Chemicals</button>
            <button id="reset">Reset</button>
        </div>
        
        <div class="output" id="output">
            Output will appear here...
        </div>
    </div>

    <script>
        const liquid = document.getElementById('liquid');
        const output = document.getElementById('output');
        let chemicalComposition = [];
        
        // Chemical properties
        const chemicals = {
            'A': { color: 'rgba(0, 100, 255, 0.7)', name: 'Chemical A (Blue)' },
            'B': { color: 'rgba(255, 50, 50, 0.7)', name: 'Chemical B (Red)' },
            'C': { color: 'rgba(255, 255, 0, 0.7)', name: 'Chemical C (Yellow)' }
        };
        
        // Add chemical functions
        document.getElementById('add-chemical1').addEventListener('click', () => addChemical('A'));
        document.getElementById('add-chemical2').addEventListener('click', () => addChemical('B'));
        document.getElementById('add-chemical3').addEventListener('click', () => addChemical('C'));
        
        // Mix chemicals
        document.getElementById('mix').addEventListener('click', mixChemicals);
        
        // Reset flask
        document.getElementById('reset').addEventListener('click', resetFlask);
        
        function addChemical(chem) {
            // Increase liquid level
            const currentHeight = parseInt(liquid.style.height || '0');
            const newHeight = Math.min(currentHeight + 30, 180);
            liquid.style.height = `${newHeight}px`;
            
            // Add color (either set or blend)
            if (chemicalComposition.length === 0) {
                liquid.style.backgroundColor = chemicals[chem].color;
            } else {
                // Simple blending - in reality you'd want a more sophisticated approach
                liquid.style.backgroundColor = blendColors(liquid.style.backgroundColor, chemicals[chem].color);
            }
            
            // Record chemical added
            chemicalComposition.push(chem);
            updateOutput(`Added ${chemicals[chem].name}`);
        }
        
        

        
        function mixChemicals() {
            if (chemicalComposition.length === 0) {
                updateOutput("No chemicals to mix!");
                return;
            }
            
            // Animate mixing
            liquid.style.transition = 'background-color 2s';
            
            // Determine result based on composition
            const uniqueChems = [...new Set(chemicalComposition)];
            let resultColor, resultMessage;
            
            if (uniqueChems.length === 1) {
                resultColor = chemicals[uniqueChems[0]].color;
                resultMessage = `Only ${chemicals[uniqueChems[0]].name} present - no reaction`;
            } else if (uniqueChems.includes('A') && uniqueChems.includes('B')) {
                resultColor = 'rgba(150, 0, 200, 0.8)'; // Purple
                resultMessage = 'Blue + Red = Purple solution formed!';
            } else if (uniqueChems.includes('A') && uniqueChems.includes('C')) {
                resultColor = 'rgba(100, 200, 50, 0.8)'; // Green
                resultMessage = 'Blue + Yellow = Green solution formed!';
            } else if (uniqueChems.includes('B') && uniqueChems.includes('C')) {
                resultColor = 'rgba(255, 100, 0, 0.8)'; // Orange
                resultMessage = 'Red + Yellow = Orange solution formed!';
            } else {
                // All three chemicals
                resultColor = 'rgba(100, 100, 100, 0.8)'; // Gray/brown
                resultMessage = 'All three chemicals created a neutralized solution';
            }
            
            // Apply the result
            liquid.style.backgroundColor = resultColor;
            updateOutput(resultMessage);
            
            // Add mixing animation
            liquid.classList.add('mixing');
            setTimeout(() => {
                liquid.classList.remove('mixing');
            }, 2000);
        }
        
        function resetFlask() {
            liquid.style.height = '0';
            liquid.style.backgroundColor = 'transparent';
            chemicalComposition = [];
            updateOutput('Flask has been reset');
        }
        
        function updateOutput(message) {
            output.textContent = message;
        }
        
        // Simple color blending function
        function blendColors(color1, color2) {
            // This is a very simplistic approach - real color blending would be more complex
            const c1 = hexToRgb(color1) || {r:0,g:0,b:0,a:0};
            const c2 = hexToRgb(color2) || {r:0,g:0,b:0,a:0};
            
            const r = Math.round((c1.r + c2.r) / 2);
            const g = Math.round((c1.g + c2.g) / 2);
            const b = Math.round((c1.b + c2.b) / 2);
            const a = (c1.a + c2.a) / 2;
            
            return `rgba(${r}, ${g}, ${b}, ${a})`;
        }
        
        function hexToRgb(color) {
            // Convert rgba string to object
            if (color.startsWith('rgba')) {
                const parts = color.match(/[\d.]+/g);
                return {
                    r: parseInt(parts[0]),
                    g: parseInt(parts[1]),
                    b: parseInt(parts[2]),
                    a: parseFloat(parts[3])
                };
            }
            return null;
        }
    </script>
</body>
</html>